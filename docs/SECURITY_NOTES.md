# 보안 관련 메모 (v3)

- 현재 관리자 기능은 `x-admin-secret` 헤더를 기반으로 한 임시 보호만 염두에 두고 있습니다. 클라이언트에서 헤더를 강제로 삽입하면 누구든지 쓰기 요청을 보낼 수 있으므로, **실제 운영 시에는 관리자 로그인/서버 세션 기반 인증을 필수로 구축**해야 합니다.
- Netlify 프런트엔드는 Vite 빌드 결과가 브라우저에 모두 노출됩니다. 따라서 `VITE_ADMIN_SECRET` 값을 Netlify 환경 변수에 넣더라도, 최종 번들에 그대로 포함되어 사용자가 개발자 도구로 확인할 수 있습니다. 민감한 키는 절대 프런트엔드 환경 변수에 넣지 말고, **백엔드에서만 사용하거나 서버 측 인증 흐름을 도입**해야 합니다.
- 조회수 누적을 위해 `/api/issues/:id` 호출 시 Firestore `metrics` 컬렉션에 단순 카운트를 남깁니다. 이 로직은 사용자의 반복 호출이나 봇 트래픽에 취약하므로 **속도 제한(rate limiting), IP 기반 방어, 인증**과 같은 보완책을 반드시 추가해야 합니다.
- Firebase 서비스 계정 키는 반드시 Render 환경 변수(`FIREBASE_SERVICE_ACCOUNT`)로만 주입하고 Git 저장소에는 절대 포함하지 않습니다. 키 유출 시 프로젝트 전체가 위험해집니다.
- TODO: 장기적으로는 Cloud Armor, WAF, API Gateway 등을 통해 백엔드에 대한 접근 제어를 강화해야 합니다.
